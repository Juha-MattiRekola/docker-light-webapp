<!DOCTYPE html>
<html lang="fi" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Docker-perusteet</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container container-wide">
        <div class="terminal-header">
            <div class="terminal-dot dot-red"></div>
            <div class="terminal-dot dot-yellow"></div>
            <div class="terminal-dot dot-green"></div>
            <span class="terminal-title">docker-basics ~ terminal</span>
            <button class="theme-toggle" onclick="toggleTheme()">teema</button>
        </div>
        
        <div class="terminal-body">
            <a href="index.html" class="back-link">takaisin</a>
            
            <h1>Docker-perusteet</h1>
            <p class="subtitle">Konttiteknologian ydinkonseptit ja käyttö</p>
            
            <h2 class="section-title">Mikä on Docker?</h2>
            <p>
                Docker on konttiteknologia, joka paketoi sovelluksen ja sen riippuvuudet 
                yhteen siirrettävään yksikköön. Kontit jakavat isäntäkoneen käyttöjärjestelmän 
                ytimen, mikä tekee niistä kevyempiä kuin perinteiset virtuaalikoneet.
            </p>
            
            <div class="info-box">
                <strong>Huom:</strong> Kontit vs. virtuaalikoneet – kontit käynnistyvät sekunneissa, 
                VM:t minuuteissa.
            </div>
            
            <h2 class="section-title">Dockerfile</h2>
            <p>Dockerfile on resepti, joka kertoo miten kontti-image rakennetaan:</p>
            
            <pre><code><span class="code-comment"># Käytä Python-baseimageä</span>
FROM python:3.12-alpine

<span class="code-comment"># Aseta työkansio</span>
WORKDIR /app

<span class="code-comment"># Kopioi riippuvuudet ensin (cache-optimointi)</span>
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

<span class="code-comment"># Kopioi sovellus</span>
COPY . .

<span class="code-comment"># Avaa portti ja käynnistä</span>
EXPOSE 5000
CMD ["python", "app.py"]</code></pre>
            
            <h2 class="section-title">Peruskomennot</h2>
            
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Komento</th>
                        <th>Kuvaus</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>docker build -t nimi .</code></td>
                        <td>Rakenna image nykyisestä kansiosta</td>
                    </tr>
                    <tr>
                        <td><code>docker run -d -p 8080:80 nimi</code></td>
                        <td>Käynnistä kontti taustalle portilla</td>
                    </tr>
                    <tr>
                        <td><code>docker ps</code></td>
                        <td>Listaa käynnissä olevat kontit</td>
                    </tr>
                    <tr>
                        <td><code>docker logs kontti</code></td>
                        <td>Näytä kontin lokit</td>
                    </tr>
                    <tr>
                        <td><code>docker exec -it kontti sh</code></td>
                        <td>Avaa shell konttiin</td>
                    </tr>
                    <tr>
                        <td><code>docker stop kontti</code></td>
                        <td>Pysäytä kontti</td>
                    </tr>
                    <tr>
                        <td><code>docker rm kontti</code></td>
                        <td>Poista pysäytetty kontti</td>
                    </tr>
                    <tr>
                        <td><code>docker images</code></td>
                        <td>Listaa paikalliset imaget</td>
                    </tr>
                </tbody>
            </table>
            
            <h2 class="section-title">Verkot ja volumet</h2>
            
            <ul>
                <li><strong>Bridge-verkko</strong> – oletusverkko, kontit voivat kommunikoida nimillä</li>
                <li><strong>Host-verkko</strong> – kontti käyttää isännän verkkorajapintaa suoraan</li>
                <li><strong>Volumet</strong> – pysyvä tallennustila, säilyy kontin poiston jälkeen</li>
                <li><strong>Bind mounts</strong> – isännän kansio liitetty konttiin</li>
            </ul>
            
            <h2 class="section-title">Hyödyllisiä vinkkejä</h2>
            
            <div class="card card-accent">
                <p><strong>Multi-stage build</strong></p>
                <p style="margin-top: 8px;">Käytä useita FROM-lauseita pienentämään lopullista imagea:</p>
                <pre style="margin-top: 10px;"><code>FROM node:18 AS builder
RUN npm run build

FROM nginx:alpine
COPY --from=builder /app/dist /usr/share/nginx/html</code></pre>
            </div>
        </div>
    </div>
    <script src="js/theme.js"></script>
</body>
</html>
